{% if session %}
<div class="session-card {% if session.type_evenement == 'JOUR_FERIE' %}jour-ferie
    {% elif session.type_evenement == 'VACANCES' %}vacances
    {% elif session.type_evenement == 'EXAMEN_PARTIEL' or session.type_evenement == 'EXAMEN_FINAL' %}examen{% endif %}">
    
    <a href="{% url 'supprimer_evenement' session.id %}" 
       class="delete-event" 
       onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet événement ?');"
       title="Supprimer cet événement">
        <i class="fas fa-times-circle"></i>
    </a>
    
    {% if session.type_evenement == 'COURS' %}
        <strong>{{ session.matiere.name }}</strong><br>
        <small>{{ session.professeur.admin.get_full_name }}</small>
    {% elif session.type_evenement == 'RATTRAPAGE' %}
        <strong style="color: #721c24;">Rattrapage</strong><br>
        <strong>{{ session.matiere.name }}</strong>
        <small>{{ session.professeur.admin.get_full_name }}</small>
    {% elif session.type_evenement == 'FORMATION_MILITAIRE' %}
        <strong style="color: #004085;">Formation Militaire</strong><br>
        <small>{{ session.titre_evenement }}</small>
    {% elif session.type_evenement == 'CONFERENCE' %}
        <strong style="color: #856404;">Conférence</strong><br>
        <small>{{ session.titre_evenement }}</small>
    {% elif session.type_evenement == 'EXAMEN_PARTIEL' %}
        <strong style="color: #856404;">Examen Partiel</strong><br>
        <strong>{{ session.matiere.name }}</strong>
    {% elif session.type_evenement == 'EXAMEN_FINAL' %}
        <strong style="color: #721c24;">Examen Final</strong><br>
        <strong>{{ session.matiere.name }}</strong>
    {% else %}
        <strong>{{ session.titre_evenement }}</strong>
    {% endif %}
</div>
{% else %}
<!-- Formulaire rapide d'ajout -->
<form class="quick-add-form" method="POST" action="{% url 'creer_emploi_temps' %}">
    {% csrf_token %}
    <input type="hidden" name="type_evenement" value="COURS">
    <input type="hidden" name="promotion" value="{{ promotion_selected }}">
    <input type="hidden" name="date" value="{{ date|date:'Y-m-d' }}">
    <input type="hidden" name="horaire" value="{{ horaire }}">
    
    <select name="matiere" class="form-control form-control-sm">
        <option value="">-- Choisir matière --</option>
        {% for subject in subjects %}
            <option value="{{ subject.id }}" data-professeur="{{ subject.staff.id }}">
                {{ subject.name }}
            </option>
        {% endfor %}
    </select>
    
    <button type="submit" class="btn btn-sm btn-primary mt-1">
        <i class="fas fa-plus"></i>
    </button>
</form>
{% endif %}
