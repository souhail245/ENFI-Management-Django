{% extends 'main_app/base.html' %}
{% block content %}
<style>
    .update-form-container {
        max-width: 600px;
        margin: 30px auto;
        padding: 25px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .session-details {
        background: #f8f9fa;
        border-radius: 6px;
        padding: 20px;
        margin-bottom: 25px;
    }

    .session-details p {
        margin-bottom: 10px;
        color: #2c3e50;
    }

    .session-details strong {
        color: #2c3e50;
        font-weight: 600;
    }

    .form-control {
        border: 1px solid #dde2e6;
        border-radius: 4px;
        padding: 10px;
        height: 45px;
        font-size: 16px;
    }

    .btn-primary {
        background: #4CAF50;
        border: none;
        padding: 12px 25px;
        font-size: 16px;
        font-weight: 500;
        width: 100%;
        margin-bottom: 15px;
    }

    .btn-primary:hover {
        background: #45a049;
    }

    .btn-secondary {
        background: none;
        border: 1px solid #4CAF50;
        color: #4CAF50;
        padding: 12px 25px;
        font-size: 16px;
        font-weight: 500;
        width: 100%;
    }

    .btn-secondary:hover {
        background: #f8f9fa;
        color: #45a049;
    }

    .current-progress {
        background: #e9ecef;
        border-radius: 4px;
        height: 8px;
        margin: 15px 0;
        overflow: hidden;
    }

    .progress-bar {
        background: linear-gradient(to right, #4CAF50, #45a049);
        height: 100%;
        transition: width 0.3s ease;
    }
</style>

<div class="update-form-container">
    <h2 class="text-center mb-4">Mise à jour de la progression</h2>
    
    <div class="session-details">
        <p><strong>Matière:</strong> {{ emploi.matiere.name }}</p>
        <p><strong>Professeur:</strong> {{ emploi.professeur.admin.get_full_name }}</p>
        <p><strong>Niveau:</strong> {{ emploi.niveau.niveau }}</p>
        <p><strong>Jour:</strong> {{ emploi.jour }} - {{ emploi.horaire }}</p>
        
        <div class="current-progress">
            <div class="progress-bar" style="width: {{ emploi.progression|default:0 }}%"></div>
        </div>
        <p class="text-center">Progression actuelle: {{ emploi.progression|default:0 }}%</p>
    </div>

    <form method="POST">
        {% csrf_token %}
        <div class="form-group">
            <label for="progression">Nouvelle progression (%)</label>
            <input type="number" 
                   name="progression" 
                   id="progression" 
                   class="form-control"
                   value="{{ emploi.progression|default:0 }}"
                   min="0" 
                   max="100" 
                   required>
        </div>
        
        <button type="submit" class="btn btn-primary">Mettre à jour</button>
        <a href="{% url 'liste_emplois' %}" class="btn btn-secondary">Annuler</a>
    </form>
</div>

<script>
document.getElementById('progression').addEventListener('input', function(e) {
    var value = parseInt(e.target.value);
    if (value < 0) e.target.value = 0;
    if (value > 100) e.target.value = 100;
});
</script>
{% endblock content %}
